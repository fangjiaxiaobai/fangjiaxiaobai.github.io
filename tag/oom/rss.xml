<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>æ–¹å®¶å°ç™½ â€¢ Posts by &#34;oom&#34; tag</title>
        <link>https://fangjiaxiaobai.github.io</link>
        <description>å’Œä½ ä¸€èµ·é‡è§æ›´å¥½çš„è‡ªå·±</description>
        <language>zh-CN</language>
        <pubDate>Thu, 19 Aug 2021 17:13:55 +0800</pubDate>
        <lastBuildDate>Thu, 19 Aug 2021 17:13:55 +0800</lastBuildDate>
        <category>leetCode</category>
        <category>æ•°æ®ç»“æ„</category>
        <category>é“¾è¡¨</category>
        <category>é¢ç»ä¹‹ç®—æ³•é¢˜</category>
        <category>MySQL</category>
        <category>Redis</category>
        <category>æ•°ç»„</category>
        <category>ç›®å½•</category>
        <category>é›ªèŠ±ç®—æ³•</category>
        <category>ç®—æ³•</category>
        <category>git</category>
        <category>çº¿ç¨‹æ± </category>
        <category>é¢ç»</category>
        <category>æºç </category>
        <category>HashMap</category>
        <category>String</category>
        <category>OOM</category>
        <category>JVM</category>
        <category>Java</category>
        <category>JDK</category>
        <category>Stream</category>
        <item>
            <guid isPermalink="true">https://fangjiaxiaobai.github.io/2021/08/19/java%E7%B3%BB%E5%88%97/JVM/OOM/</guid>
            <title>JVMä¹‹ä½ æ²¡è§è¿‡çš„OOM</title>
            <link>https://fangjiaxiaobai.github.io/2021/08/19/java%E7%B3%BB%E5%88%97/JVM/OOM/</link>
            <category>OOM</category>
            <category>JVM</category>
            <category>Java</category>
            <pubDate>Thu, 19 Aug 2021 17:13:55 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;ä¸€æ–‡ææ‡‚å†…å­˜æº¢å‡ºï¼Œä¿å†…å­˜å¹³å®‰ï¼Œé˜²æ­¢ä½ è¢«ç¥­å¤©:[æ‰‹åŠ¨æ»‘ç¨½]:&lt;/p&gt;
&lt;h2 id=&#34;é‡Šä¹‰&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#é‡Šä¹‰&#34;&gt;#&lt;/a&gt; é‡Šä¹‰&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;OOM&lt;/code&gt;  çš„å«ä¹‰ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ&lt;br&gt;
 æ˜¯ JVM ç‹¬æœ‰çš„å—ï¼Ÿ  &lt;code&gt;linux&lt;/code&gt;  æ˜¯å¦ä¹Ÿä¼šå­˜åœ¨ï¼Œé‚£åˆæ˜¯æ€ä¹ˆè‚¥äº‹ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;OOM&lt;/code&gt;  :  &lt;code&gt;Out Of Memory&lt;/code&gt;  .Â  å†…å­˜æº¢å‡ºã€‚å†…å­˜æº¢å‡ºæ¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å­˜ä¸å¤Ÿç”¨äº†ï¼Œå°±ä¼šå‘ç”Ÿè¿™ä¸ªé—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å†…å­˜åˆæ˜¯ä»€ä¹ˆå‘¢&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#å†…å­˜åˆæ˜¯ä»€ä¹ˆå‘¢&#34;&gt;#&lt;/a&gt; å†…å­˜åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;1ã€ å†…å­˜ æ˜¯è®¡ç®—æœºçš„é‡è¦éƒ¨ä»¶ä¹‹ä¸€ã€‚å®ƒç”¨äºæš‚æ—¶å­˜æ”¾ CPU ä¸­çš„è¿ç®—æ•°æ®ï¼Œä¸ç¡¬ç›˜ç­‰å¤–éƒ¨å­˜å‚¨äº¤æ¢æ•°æ®ã€‚æ˜¯å¤–å­˜ä¸ &lt;code&gt;CPU&lt;/code&gt;  è¿›è¡Œæ²Ÿé€šçš„æ¡¥æ¢ã€‚&lt;/p&gt;
&lt;p&gt;2ã€ &lt;code&gt;Java&lt;/code&gt;  å†…å­˜ã€‚è¯´åˆ°è¿™é‡Œæˆ‘ä»¬å°±ä¸å¾—è¯´ä¸€ä¸‹ java çš„å†…å­˜æ¨¡å‹ (JMM) äº†ã€‚å¦‚ä¸‹å›¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/images/java/jvm/JMM.png&#34; alt=&#34;JMM&#34;&gt;&lt;/p&gt;
&lt;p&gt;å°±è¿™ä¸ªä¸€ä¸ªå›¾å°±å¾ˆä¸ä¸‹å‡ åä¸ªé¢è¯•è€ƒç‚¹ï¼šæ¯”å¦‚ &lt;code&gt;votitle&lt;/code&gt;  å…³é”®å­—ï¼Œå†…å­˜æ …æ ï¼ŒæŒ‡ä»¤é‡æ’ï¼Œ5 é¡¹ &lt;code&gt;Happen-Before&lt;/code&gt;  åŸåˆ™ï¼Œå†…å­˜åŸå­æ“ä½œï¼Œæ•°æ® &lt;code&gt;IO&lt;/code&gt;  æ“ä½œç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;é—²è¯å°‘æ‰¯ï¼ŒæŠ›ä¸ªé—®é¢˜ï¼Œ &lt;code&gt;OOM&lt;/code&gt;  å‘ç”ŸåŒºåŸŸä¼šä¸Šå›¾ä¸­é‚£ä¸ªéƒ¨åˆ†å‘ç”Ÿå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#å‰è¨€&#34;&gt;#&lt;/a&gt; å‰è¨€&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;java&lt;/code&gt;  è¿è¡Œæ—¶å†…å­˜åŒºåŸŸ  &lt;code&gt;JAVA RUNTIME MEMEORY AREA&lt;/code&gt; , æ³¨æ„åŒºåˆ† &lt;code&gt;JMM&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;å¤§å®¶éƒ½çŸ¥é“çš„ï¼Œ &lt;code&gt;java&lt;/code&gt;  è¿è¡Œæ—¶å†…å­˜åŒºåŸŸï¼Œåˆ†ä¸ºç¨‹åºè®¡æ•°å™¨ (PC å¯„å­˜å™¨)ï¼Œjava è™šæ‹Ÿæœºæ ˆï¼Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œå †ï¼Œæ–¹æ³•åŒºï¼Œè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå †å¤–å†…å­˜ (ç›´æ¥å†…å­˜)&lt;/p&gt;
&lt;p&gt;1ã€ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œæ˜¯å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„é‚£æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ã€‚è‹¥å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¨‹åºè®¡æ•°å™¨ä¸º &lt;code&gt;Undefined&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;2ã€ &lt;code&gt;Java&lt;/code&gt;  è™šæ‹Ÿæœºæ ˆæ˜¯æè¿°  &lt;code&gt;Java&lt;/code&gt;  æ–¹æ³•è¿è¡Œè¿‡ç¨‹çš„å†…å­˜æ¨¡å‹ã€‚ &lt;code&gt;Java&lt;/code&gt;  è™šæ‹Ÿæœºæ ˆä¼šä¸ºæ¯ä¸€ä¸ªå³å°†è¿è¡Œçš„  &lt;code&gt;Java&lt;/code&gt;  æ–¹æ³•åˆ›å»ºä¸€å—å«åš â€œæ ˆå¸§â€ çš„åŒºåŸŸï¼Œç”¨äºå­˜æ”¾è¯¥æ–¹æ³•è¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šå±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥ï¼Œæ–¹æ³•å‡ºå£ä¿¡æ¯ç­‰ï¼Œæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹å³ä¸ºæ ˆå¸§å‹æ ˆå‡ºæ ˆçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;3ã€æœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸º  &lt;code&gt;JVM&lt;/code&gt;  è¿è¡Œ  &lt;code&gt;Native&lt;/code&gt;  æ–¹æ³•å‡†å¤‡çš„ç©ºé—´ï¼Œç”±äºå¾ˆå¤š  &lt;code&gt;Native&lt;/code&gt;  æ–¹æ³•éƒ½æ˜¯ç”¨  &lt;code&gt;C&lt;/code&gt;  è¯­è¨€å®ç°çš„ï¼Œæ‰€ä»¥å®ƒé€šå¸¸åˆå«  &lt;code&gt;C&lt;/code&gt;  æ ˆã€‚å®ƒä¸  &lt;code&gt;Java&lt;/code&gt;  è™šæ‹Ÿæœºæ ˆå®ç°çš„åŠŸèƒ½ç±»ä¼¼ï¼Œåªä¸è¿‡æœ¬åœ°æ–¹æ³•æ ˆæ˜¯æè¿°æœ¬åœ°æ–¹æ³•è¿è¡Œè¿‡ç¨‹çš„å†…å­˜æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;4ã€å †æ˜¯ç”¨æ¥å­˜æ”¾å¯¹è±¡çš„å†…å­˜ç©ºé—´ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½å­˜å‚¨åœ¨å †ä¸­ã€‚è¿™ä¸€åŒºåŸŸæ˜¯çº¿ç¨‹å…±äº«ï¼Œæ•´ä¸ª  &lt;code&gt;Java&lt;/code&gt;  è™šæ‹Ÿæœºåªæœ‰ä¸€ä¸ªå †ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½è®¿é—®åŒä¸€ä¸ªå †ã€‚å †åˆå¯åˆ’åˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹´è½»ä»£å†…å­˜åˆå¯ä»¥åˆ†ä¸º &lt;code&gt;Eden&lt;/code&gt; ,  &lt;code&gt;from Surivor&lt;/code&gt; , &lt;code&gt;to Surivor&lt;/code&gt; , å¹¶ä¸”é»˜è®¤ä»¥ 8:1:1 çš„æ¯”ä¾‹è¿›è¡Œåˆ†é…ã€‚&lt;/p&gt;
&lt;p&gt;5ã€æ–¹æ³•åŒºï¼š &lt;code&gt;Java&lt;/code&gt;  è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰æ–¹æ³•åŒºæ˜¯å †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ã€‚æ–¹æ³•åŒºå­˜æ”¾ä»¥ä¸‹ä¿¡æ¯ï¼šå·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ï¼Œå¸¸äº®ï¼Œé™æ€å˜é‡ï¼Œå³æ—¶ç¼–è¯‘ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ã€‚çº¿ç¨‹å…±äº«çš„åŒºåŸŸã€‚ä¸ºäº†ä¸å †åŒºåˆ†ï¼Œæ–¹æ³•è¿˜æœ‰ä¸€ä¸ªåˆ«åï¼š &lt;code&gt;Non-Heap&lt;/code&gt;  (éå †)ã€‚&lt;/p&gt;
&lt;p&gt;5.1 ã€è¿è¡Œæ—¶å¸¸é‡æ± ï¼šå­˜æ”¾å¸¸é‡çš„åŒºåŸŸã€‚ åœ¨è¿è¡ŒæœŸé—´ï¼Œå¯ä»¥å‘å¸¸é‡æ± ä¸­æ·»åŠ æ–°çš„å˜é‡ï¼Œå¦‚  &lt;code&gt;String&lt;/code&gt;  ç±»çš„ &lt;code&gt;intern()&lt;/code&gt;  æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;6ã€å †å¤–å†…å­˜æ˜¯ &lt;code&gt;java&lt;/code&gt;  è™šæ‹Ÿæœºä¹‹å¤–çš„å†…å®¹ï¼Œä½†ä¹Ÿå¯èƒ½è¢« &lt;code&gt;java&lt;/code&gt;  ä½¿ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¹Ÿä¼šå› å†…å­˜ä¸è¶³è€ŒæŠ›å‡º  &lt;code&gt;OutOfMemoryError&lt;/code&gt; ã€&lt;/p&gt;
&lt;p&gt;çŸ¥é“äº† &lt;code&gt;Java&lt;/code&gt;  è¿è¡Œå†…å­˜åŒºåŸŸï¼Œé‚£ä¹ˆå¯èƒ½å‘ç”Ÿ  &lt;code&gt;OOM&lt;/code&gt;  çš„åŒºåŸŸæœ‰å“ªäº›å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ &lt;code&gt;OOM&lt;/code&gt;  åªçš„æ˜¯å†…å­˜æº¢å‡ºï¼Œæ‰€ä»¥ å †ï¼Œéå †å³æ–¹æ³•åŒºï¼Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œä»¥åŠå †å¤–å†…å­˜ éƒ½æ˜¯ä¼šå‘ç”Ÿ  &lt;code&gt;OOM&lt;/code&gt;  çš„ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ &lt;code&gt;java&lt;/code&gt;  è™šæ‹Ÿæœºæ ˆå‘¢ï¼Ÿä¸ä¼šå‘ç”Ÿå†…å®¹æº¢å‡ºå—ï¼ŸÂ  Â ä¼šï¼ä½†æ˜¯ æ ˆå‘ç”Ÿå†…å®¹æº¢å‡ºçš„æ—¶å€™ï¼ŒæŠ¥çš„é”™è¯¯æ˜¯Â  &lt;code&gt;StackOverflowError&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;é‚£ç¨‹åºè®¡æ•°å™¨å‘¢ï¼ŸÂ  ç¨‹åºè®¡æ•°å™¨ï¼Œæ˜¯ä¸ä¼šå‘é€å†…å®¹æº¢å‡ºçš„ã€‚ å› ä¸º å­˜å‚¨çš„æ˜¯ï¼šå½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„é‚£æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€å•Šã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/images/java/jvm/OOM%E5%8C%BA%E5%9F%9F%E5%9B%BE.png&#34; alt=&#34;OOMåŒºåŸŸå›¾&#34;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šå›¾ä¸­è¿˜æŒ‡å®šäº†å„åŒºåŸŸå¤§å°çš„å‚æ•°é…ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-Xms&lt;/code&gt;  è®¾ç½®å †çš„æœ€å°ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-Xmx&lt;/code&gt;  è®¾ç½®å †çš„æœ€å¤§ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-XX:NewSize&lt;/code&gt;  è®¾ç½®æ–°ç”Ÿä»£æœ€å°ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-XX:MaxNewSize&lt;/code&gt;  è®¾ç½®æ–°ç”Ÿä»£æœ€å¤§ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-XX:PermSize&lt;/code&gt;  è®¾ç½®æ°¸ä¹…ä»£æœ€å°ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-XX:MaxPermSize&lt;/code&gt;  è®¾ç½®æ°¸ä¹…ä»£æœ€å¤§ç©ºé—´å¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;-Xss&lt;/code&gt;  è®¾ç½®æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ²¡æœ‰ç›´æ¥è®¾ç½®è€å¹´ä»£çš„å‚æ•°ï¼Œä½†æ˜¯å¯ä»¥è®¾ç½®å †ç©ºé—´å¤§å°å’Œæ–°ç”Ÿä»£ç©ºé—´å¤§å°ä¸¤ä¸ªå‚æ•°æ¥é—´æ¥æ§åˆ¶ã€‚Â  &lt;code&gt;è€å¹´ä»£ç©ºé—´å¤§å°=å †ç©ºé—´å¤§å°-å¹´è½»ä»£å¤§ç©ºé—´å¤§å°&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;åœºæ™¯åˆ†æ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#åœºæ™¯åˆ†æ&#34;&gt;#&lt;/a&gt; åœºæ™¯åˆ†æ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æŒ¨ä¸ªåˆ†æä¸‹å‘ç”Ÿ &lt;code&gt;OOM&lt;/code&gt;  çš„ 9 ç§åœºæ™¯&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿ &lt;code&gt;OOM&lt;/code&gt; Â å‘¢ï¼ŸÂ  å½“å†…å­˜ä¸¥é‡ä¸å¤Ÿç”¨çš„æ—¶å€™å°±ä¼šå‘ç”ŸÂ Â  &lt;code&gt;java.lang.OutOfMemoryError&lt;/code&gt;  ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸‹æ¯ä¸ªåŒºåŸŸéƒ½æœ‰å¯èƒ½å‡ºç°å†…å­˜æº¢å‡ºé—®é¢˜.&lt;/p&gt;
&lt;h3 id=&#34;javaheap-space&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#javaheap-space&#34;&gt;#&lt;/a&gt;  &lt;code&gt;JavaHeap space&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;å½“å †å†…å­˜ï¼ˆ &lt;code&gt;Heap Space&lt;/code&gt; ï¼‰æ²¡æœ‰è¶³å¤Ÿç©ºé—´å­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šæŠ›å‡º  &lt;code&gt;java.lang.OutOfMemoryError:Javaheap space&lt;/code&gt;  é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Javaheap space&lt;/code&gt;  é”™è¯¯äº§ç”Ÿçš„å¸¸è§åŸå› å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;p&gt;1. è¯·æ±‚åˆ›å»ºä¸€ä¸ªè¶…å¤§å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¤§æ•°ç»„ã€‚&lt;br&gt;
2. è¶…å‡ºé¢„æœŸçš„è®¿é—®é‡ / æ•°æ®é‡ï¼Œé€šå¸¸æ˜¯ä¸Šæ¸¸ç³»ç»Ÿè¯·æ±‚æµé‡é£™å‡ï¼Œå¸¸è§äºå„ç±»ä¿ƒé”€ / ç§’æ€æ´»åŠ¨ï¼Œå¯ä»¥ç»“åˆä¸šåŠ¡æµé‡æŒ‡æ ‡æ’æŸ¥æ˜¯å¦æœ‰å°–çŠ¶å³°å€¼ã€‚&lt;br&gt;
3. è¿‡åº¦ä½¿ç”¨ç»ˆç»“å™¨ï¼ˆ &lt;code&gt;Finalizer&lt;/code&gt; ï¼‰ï¼Œè¯¥å¯¹è±¡æ²¡æœ‰ç«‹å³è¢«  &lt;code&gt;GC&lt;/code&gt; ã€‚&lt;br&gt;
4. å†…å­˜æ³„æ¼ï¼ˆ &lt;code&gt;Memory Leak&lt;/code&gt; ï¼‰ï¼Œå¤§é‡å¯¹è±¡å¼•ç”¨æ²¡æœ‰é‡Šæ”¾ï¼Œ &lt;code&gt;JVM&lt;/code&gt;  æ— æ³•å¯¹å…¶è‡ªåŠ¨å›æ”¶ï¼Œå¸¸è§äºä½¿ç”¨äº†  &lt;code&gt;File&lt;/code&gt;  ç­‰èµ„æºæ²¡æœ‰å›æ”¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;é’ˆå¯¹å¤§éƒ¨åˆ†æƒ…å†µï¼Œé€šå¸¸åªéœ€è¦é€šè¿‡  &lt;code&gt;-Xmx&lt;/code&gt;  å‚æ•°è°ƒé«˜  &lt;code&gt;JVM&lt;/code&gt;  å †å†…å­˜ç©ºé—´å³å¯ã€‚å¦‚æœä»ç„¶æ²¡æœ‰è§£å†³ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æƒ…å†µåšè¿›ä¸€æ­¥å¤„ç†ï¼š&lt;/p&gt;
&lt;p&gt;1ã€å¦‚æœæ˜¯è¶…å¤§å¯¹è±¡ï¼Œå¯ä»¥æ£€æŸ¥å…¶åˆç†æ€§ï¼Œæ¯”å¦‚æ˜¯å¦ä¸€æ¬¡æ€§æŸ¥è¯¢äº†æ•°æ®åº“å…¨éƒ¨ç»“æœï¼Œè€Œæ²¡æœ‰åšç»“æœæ•°é™åˆ¶ã€‚&lt;br&gt;
2ã€å¦‚æœæ˜¯ä¸šåŠ¡å³°å€¼å‹åŠ›ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ æœºå™¨èµ„æºï¼Œæˆ–è€…åšé™æµé™çº§ã€‚&lt;br&gt;
3ã€å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œéœ€è¦æ‰¾åˆ°æŒæœ‰çš„å¯¹è±¡ï¼Œä¿®æ”¹ä»£ç è®¾è®¡ï¼Œæ¯”å¦‚å…³é—­æ²¡æœ‰é‡Šæ”¾çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä»£ç æ¡ˆä¾‹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ä»£ç æ¡ˆä¾‹&#34;&gt;#&lt;/a&gt; ä»£ç æ¡ˆä¾‹&lt;/h4&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤ºå¤§å¯¹è±¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * -Xms128M -Xmx128M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;bigObject&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// 21 å¯ä»¥ï¼Œ22å°±ä¼šOOM&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// 4* 1024 * 1024 = 4M * 32 = 128M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[] integers = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[&lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt;*&lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt;*&lt;span class=&#34;number&#34;&gt;32&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/heapSpaceError.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;gc-overhead-limit-exceeded&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#gc-overhead-limit-exceeded&#34;&gt;#&lt;/a&gt;  &lt;code&gt;GC overhead limit exceeded&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;å½“  &lt;code&gt;Java&lt;/code&gt;  è¿›ç¨‹èŠ±è´¹  &lt;code&gt;98%&lt;/code&gt;  ä»¥ä¸Šçš„æ—¶é—´æ‰§è¡Œ  &lt;code&gt;GC&lt;/code&gt; ï¼Œä½†åªæ¢å¤äº†ä¸åˆ°  &lt;code&gt;2%&lt;/code&gt;  çš„å†…å­˜ï¼Œä¸”è¯¥åŠ¨ä½œè¿ç»­é‡å¤äº†  &lt;code&gt;5&lt;/code&gt;  æ¬¡ï¼Œå°±ä¼šæŠ›å‡º  &lt;code&gt;java.lang.OutOfMemoryError:GC overhead limit exceeded&lt;/code&gt;  é”™è¯¯ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯åº”ç”¨ç¨‹åºå·²ç»åŸºæœ¬è€—å°½äº†æ‰€æœ‰å¯ç”¨å†…å­˜ï¼Œ  &lt;code&gt;GC&lt;/code&gt;  ä¹Ÿæ— æ³•å›æ”¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-2&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-2&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;åŒÂ  &lt;code&gt;JavaHeap space&lt;/code&gt;  éƒ¨åˆ†çš„å¼‚å¸¸è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤º é¢‘ç¹GC&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * -Xms128M -Xmx128M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;overHead&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    Map map = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; HashMap();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    Random r = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Random();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;while&lt;/span&gt; (&lt;span class=&#34;keyword&#34;&gt;true&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        map.put(r.nextInt(), &lt;span class=&#34;string&#34;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹:&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/gcOverHead.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;permgen-spacejdk8-å·²åºŸå¼ƒ-see-å…ƒç©ºé—´&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#permgen-spacejdk8-å·²åºŸå¼ƒ-see-å…ƒç©ºé—´&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Permgen space&lt;/code&gt; ( &lt;code&gt;JDK8&lt;/code&gt;  å·²åºŸå¼ƒï¼Œ &lt;code&gt;see&lt;/code&gt;  å…ƒç©ºé—´ã€‚)&lt;/h3&gt;
&lt;div class=&#34;note info&#34;&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¼šåºŸå¼ƒ æ°¸ä¹…ä»£ï¼ŸÂ  Â   &lt;code&gt;see&lt;/code&gt; ï¼šÂ &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL29wZW5qZGsuamF2YS5uZXQvamVwcy8xMjI=&#34;&gt;http://openjdk.java.net/jeps/122&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;è¯¥é”™è¯¯è¡¨ç¤ºæ°¸ä¹…ä»£ï¼ˆ &lt;code&gt;Permanent Generation&lt;/code&gt; ï¼‰å·²ç”¨æ»¡ï¼Œé€šå¸¸æ˜¯å› ä¸ºåŠ è½½çš„  &lt;code&gt;class&lt;/code&gt;  æ•°ç›®å¤ªå¤šæˆ–ä½“ç§¯å¤ªå¤§ã€‚&lt;/p&gt;
&lt;p&gt;æ°¸ä¹…ä»£å­˜å‚¨å¯¹è±¡ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;p&gt;åŠ è½½ / ç¼“å­˜åˆ°å†…å­˜ä¸­çš„  &lt;code&gt;class&lt;/code&gt;  å®šä¹‰ï¼ŒåŒ…æ‹¬ç±»çš„åç§°ï¼Œå­—æ®µï¼Œæ–¹æ³•å’Œå­—èŠ‚ç ï¼›&lt;br&gt;
å¸¸é‡æ± ï¼›&lt;br&gt;
å¯¹è±¡æ•°ç»„ / ç±»å‹æ•°ç»„æ‰€å…³è”çš„  &lt;code&gt;class&lt;/code&gt; ï¼›&lt;br&gt;
 &lt;code&gt;JIT&lt;/code&gt;  ç¼–è¯‘å™¨ä¼˜åŒ–åçš„  &lt;code&gt;class&lt;/code&gt;  ä¿¡æ¯ã€‚&lt;br&gt;
 &lt;code&gt;PermGen&lt;/code&gt;  çš„ä½¿ç”¨é‡ä¸åŠ è½½åˆ°å†…å­˜çš„  &lt;code&gt;class&lt;/code&gt;  çš„æ•°é‡ / å¤§å°æ­£ç›¸å…³ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-3&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-3&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;æ ¹æ®  &lt;code&gt;Permgen space&lt;/code&gt;  æŠ¥é”™çš„æ—¶æœºï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¨‹åºå¯åŠ¨æŠ¥é”™ï¼Œä¿®æ”¹  &lt;code&gt;-XX:MaxPermSize&lt;/code&gt;  å¯åŠ¨å‚æ•°ï¼Œè°ƒå¤§æ°¸ä¹…ä»£ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨é‡æ–°éƒ¨ç½²æ—¶æŠ¥é”™ï¼Œå¾ˆå¯èƒ½æ˜¯æ²¡æœ‰åº”ç”¨æ²¡æœ‰é‡å¯ï¼Œå¯¼è‡´åŠ è½½äº†å¤šä»½  &lt;code&gt;class&lt;/code&gt;  ä¿¡æ¯ï¼Œåªéœ€é‡å¯ JVM å³å¯è§£å†³ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ—¶æŠ¥é”™ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šåŠ¨æ€åˆ›å»ºå¤§é‡  &lt;code&gt;class&lt;/code&gt; ï¼Œè€Œè¿™äº›  &lt;code&gt;class&lt;/code&gt;  çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­æš‚ï¼Œä½†æ˜¯ JVM é»˜è®¤ä¸ä¼šå¸è½½  &lt;code&gt;class&lt;/code&gt; ï¼Œå¯ä»¥è®¾ç½®  &lt;code&gt;-XX:+CMSClassUnloadingEnabled&lt;/code&gt;  å’Œ  &lt;code&gt;-XX:+UseConcMarkSweepGC&lt;/code&gt;  è¿™ä¸¤ä¸ªå‚æ•°å…è®¸  &lt;code&gt;JVM&lt;/code&gt;  å¸è½½  &lt;code&gt;class&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸Šè¿°æ–¹æ³•æ— æ³•è§£å†³ï¼Œå¯ä»¥é€šè¿‡  &lt;code&gt;jmap&lt;/code&gt;  å‘½ä»¤  &lt;code&gt;dump&lt;/code&gt;  å†…å­˜å¯¹è±¡  &lt;code&gt;jmap-dump:format=b,file=dump.hprof&lt;/code&gt;  ï¼Œç„¶ååˆ©ç”¨  &lt;code&gt;Eclipse MAT https://www.eclipse.org/mat&lt;/code&gt;  åŠŸèƒ½é€ä¸€åˆ†æå¼€é”€æœ€å¤§çš„  &lt;code&gt;classloader&lt;/code&gt;  å’Œé‡å¤  &lt;code&gt;class&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;metaspace&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#metaspace&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Metaspace&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;JDK 1.8&lt;/code&gt;  ä½¿ç”¨  &lt;code&gt;Metaspace&lt;/code&gt;  æ›¿æ¢äº†æ°¸ä¹…ä»£ï¼ˆ &lt;code&gt;Permanent Generation&lt;/code&gt; ï¼‰&lt;/p&gt;
&lt;p&gt;è¯¥é”™è¯¯è¡¨ç¤º  &lt;code&gt;Metaspace&lt;/code&gt;  å·²è¢«ç”¨æ»¡ï¼Œé€šå¸¸æ˜¯å› ä¸ºåŠ è½½çš„  &lt;code&gt;class&lt;/code&gt;  æ•°ç›®å¤ªå¤šæˆ–ä½“ç§¯å¤ªå¤§ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ç±»é—®é¢˜çš„åŸå› ä¸è§£å†³æ–¹æ³•è·Ÿ  &lt;code&gt;PermGenspace&lt;/code&gt;  éå¸¸ç±»ä¼¼ï¼Œå¯ä»¥å‚è€ƒä¸Šæ–‡ã€‚&lt;/p&gt;
&lt;p&gt;éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯è°ƒæ•´  &lt;code&gt;Metaspace&lt;/code&gt;  ç©ºé—´å¤§å°çš„å¯åŠ¨å‚æ•°ä¸º  &lt;code&gt;-XX:MaxMetaspaceSize&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä»£ç æ¡ˆä¾‹-2&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ä»£ç æ¡ˆä¾‹-2&#34;&gt;#&lt;/a&gt; ä»£ç æ¡ˆä¾‹&lt;/h4&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤º  å…ƒæ•°æ®åŒº&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * &amp;lt;p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * åœ¨ `for` å¾ªç¯ä¸­, åŠ¨æ€ç”Ÿæˆå¾ˆå¤šclass, æœ€ç»ˆå°†è¿™äº›classåŠ è½½åˆ° Metaspace ä¸­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; *&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ³¨æ„é…ç½®: -XX:MaxMetaspaceSize=64m&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; *&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * &lt;span class=&#34;doctag&#34;&gt;@throws&lt;/span&gt; Exception&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;metaSpace&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; (&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; i = &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;; ; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        Class c = cp.makeClass(&lt;span class=&#34;string&#34;&gt;&amp;quot;eu.plumbr.demo.Generated&amp;quot;&lt;/span&gt; + i).toClass();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        System.out.println(i);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹:&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/images/java/jvm/metaSpace.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;unable-to-create-new-native-thread&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#unable-to-create-new-native-thread&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Unable to create new native thread&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;æ¯ä¸ª  &lt;code&gt;Java&lt;/code&gt;  çº¿ç¨‹éƒ½éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼Œå½“  &lt;code&gt;JVM&lt;/code&gt;  å‘åº•å±‚æ“ä½œç³»ç»Ÿè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„  &lt;code&gt;native&lt;/code&gt;  çº¿ç¨‹æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„èµ„æºåˆ†é…å°±ä¼šæŠ¥æ­¤ç±»é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸå› åˆ†æ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#åŸå› åˆ†æ&#34;&gt;#&lt;/a&gt; åŸå› åˆ†æ&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;JVM&lt;/code&gt;  å‘  &lt;code&gt;OS&lt;/code&gt;  è¯·æ±‚åˆ›å»º  &lt;code&gt;native&lt;/code&gt;  çº¿ç¨‹å¤±è´¥ï¼Œå°±ä¼šæŠ›å‡º  &lt;code&gt;Unable to create new native thread&lt;/code&gt; ï¼Œå¸¸è§çš„åŸå› åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹æ•°è¶…è¿‡æ“ä½œç³»ç»Ÿæœ€å¤§çº¿ç¨‹æ•°  &lt;code&gt;ulimit&lt;/code&gt;  é™åˆ¶ï¼›&lt;br&gt;
çº¿ç¨‹æ•°è¶…è¿‡  &lt;code&gt;kernel.pid_max&lt;/code&gt; ï¼ˆåªèƒ½é‡å¯ï¼‰ï¼›&lt;br&gt;
 &lt;code&gt;native&lt;/code&gt;  å†…å­˜ä¸è¶³ï¼›&lt;/p&gt;
&lt;p&gt;è¯¥é—®é¢˜å‘ç”Ÿçš„å¸¸è§è¿‡ç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;JVM&lt;/code&gt;  å†…éƒ¨çš„åº”ç”¨ç¨‹åºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„  &lt;code&gt;Java&lt;/code&gt;  çº¿ç¨‹ï¼›&lt;br&gt;
 &lt;code&gt;JVM native&lt;/code&gt;  æ–¹æ³•ä»£ç†äº†è¯¥æ¬¡è¯·æ±‚ï¼Œå¹¶å‘æ“ä½œç³»ç»Ÿè¯·æ±‚åˆ›å»ºä¸€ä¸ª  &lt;code&gt;native&lt;/code&gt;  çº¿ç¨‹ï¼›&lt;br&gt;
æ“ä½œç³»ç»Ÿå°è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„  &lt;code&gt;native&lt;/code&gt;  çº¿ç¨‹ï¼Œå¹¶ä¸ºå…¶åˆ†é…å†…å­˜ï¼›&lt;br&gt;
å¦‚æœæ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜å·²è€—å°½ï¼Œæˆ–æ˜¯å—åˆ° 32 ä½è¿›ç¨‹çš„åœ°å€ç©ºé—´é™åˆ¶ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šæ‹’ç»æœ¬æ¬¡  &lt;code&gt;native&lt;/code&gt;  å†…å­˜åˆ†é…ï¼›&lt;br&gt;
 &lt;code&gt;JVM&lt;/code&gt;  å°†æŠ›å‡º  &lt;code&gt;java.lang.OutOfMemoryError:Unableto createnewnativethread&lt;/code&gt;  é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-4&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-4&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‡çº§é…ç½®ï¼Œä¸ºæœºå™¨æä¾›æ›´å¤šçš„å†…å­˜ï¼›&lt;/li&gt;
&lt;li&gt;é™ä½  &lt;code&gt;Java Heap Space&lt;/code&gt;  å¤§å°ï¼›&lt;/li&gt;
&lt;li&gt;ä¿®å¤åº”ç”¨ç¨‹åºçš„çº¿ç¨‹æ³„æ¼é—®é¢˜ï¼›&lt;/li&gt;
&lt;li&gt;é™åˆ¶çº¿ç¨‹æ± å¤§å°ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨  &lt;code&gt;-Xss&lt;/code&gt;  å‚æ•°å‡å°‘çº¿ç¨‹æ ˆçš„å¤§å°ï¼›&lt;/li&gt;
&lt;li&gt;è°ƒé«˜  &lt;code&gt;OS&lt;/code&gt;  å±‚é¢çš„çº¿ç¨‹æœ€å¤§æ•°ï¼šæ‰§è¡Œ  &lt;code&gt;ulimit -a&lt;/code&gt;  æŸ¥çœ‹æœ€å¤§çº¿ç¨‹æ•°é™åˆ¶ï¼Œä½¿ç”¨  &lt;code&gt;ulimit -u xxx&lt;/code&gt;  è°ƒæ•´æœ€å¤§çº¿ç¨‹æ•°é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä»£ç æ¡ˆä¾‹-3&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ä»£ç æ¡ˆä¾‹-3&#34;&gt;#&lt;/a&gt; ä»£ç æ¡ˆä¾‹&lt;/h4&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤º: Unable to create new native thread&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;nativeThread&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;while&lt;/span&gt; (&lt;span class=&#34;keyword&#34;&gt;true&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Thread(&lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Runnable() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &lt;span class=&#34;keyword&#34;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                    Thread.sleep(&lt;span class=&#34;number&#34;&gt;10000000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &amp;#125; &lt;span class=&#34;keyword&#34;&gt;catch&lt;/span&gt; (InterruptedException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;).start();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹:&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/images/java/jvm/unableCreateNative.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;out-of-swap-space&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#out-of-swap-space&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Out of swap space&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;è¯¥é”™è¯¯è¡¨ç¤ºæ‰€æœ‰å¯ç”¨çš„è™šæ‹Ÿå†…å­˜å·²è¢«è€—å°½ã€‚è™šæ‹Ÿå†…å­˜ï¼ˆ &lt;code&gt;Virtual Memory&lt;/code&gt; ï¼‰ç”±ç‰©ç†å†…å­˜ï¼ˆ &lt;code&gt;Physical Memory&lt;/code&gt; ï¼‰å’Œäº¤æ¢ç©ºé—´ï¼ˆ &lt;code&gt;Swap Space&lt;/code&gt; ï¼‰ä¸¤éƒ¨åˆ†ç»„æˆã€‚å½“è¿è¡Œæ—¶ç¨‹åºè¯·æ±‚çš„è™šæ‹Ÿå†…å­˜æº¢å‡ºæ—¶å°±ä¼šæŠ¥  &lt;code&gt;Outof swap space&lt;/code&gt;  é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé”™è¯¯é€šå¸¸æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„åŸå› ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸå› åˆ†æ-2&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#åŸå› åˆ†æ-2&#34;&gt;#&lt;/a&gt; åŸå› åˆ†æ&lt;/h4&gt;
&lt;p&gt;è¯¥é”™è¯¯å‡ºç°çš„å¸¸è§åŸå› åŒ…æ‹¬ä»¥ä¸‹å‡ ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;åœ°å€ç©ºé—´ä¸è¶³ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;2. ç‰©ç†å†…å­˜å·²è€—å…‰ï¼›&lt;/li&gt;
&lt;li&gt;3. åº”ç”¨ç¨‹åºçš„æœ¬åœ°å†…å­˜æ³„æ¼ï¼ˆ &lt;code&gt;native leak&lt;/code&gt; ï¼‰ï¼Œä¾‹å¦‚ä¸æ–­ç”³è¯·æœ¬åœ°å†…å­˜ï¼Œå´ä¸é‡Šæ”¾ã€‚&lt;/li&gt;
&lt;li&gt;4. æ‰§è¡Œ  &lt;code&gt;jmap-histo:live&lt;/code&gt;  å‘½ä»¤ï¼Œå¼ºåˆ¶æ‰§è¡Œ  &lt;code&gt;Full GC&lt;/code&gt; ï¼›å¦‚æœå‡ æ¬¡æ‰§è¡Œåå†…å­˜æ˜æ˜¾ä¸‹é™ï¼Œåˆ™åŸºæœ¬ç¡®è®¤ä¸º  &lt;code&gt;Direct ByteBuffer&lt;/code&gt;  é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-5&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-5&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;æ ¹æ®é”™è¯¯åŸå› å¯ä»¥é‡‡å–å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;å‡çº§åœ°å€ç©ºé—´ä¸º  &lt;code&gt;64 bit&lt;/code&gt; ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ä½¿ç”¨  &lt;code&gt;Arthas&lt;/code&gt;  æ£€æŸ¥æ˜¯å¦ä¸º  &lt;code&gt;Inflater/Deflater&lt;/code&gt;  è§£å‹ç¼©é—®é¢˜ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ˜¾å¼è°ƒç”¨  &lt;code&gt;end&lt;/code&gt;  æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;&lt;code&gt;Direct ByteBuffer&lt;/code&gt;  é—®é¢˜å¯ä»¥é€šè¿‡å¯åŠ¨å‚æ•°  &lt;code&gt;-XX:MaxDirectMemorySize&lt;/code&gt;  è°ƒä½é˜ˆå€¼ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;å‡çº§æœåŠ¡å™¨é…ç½® / éš”ç¦»éƒ¨ç½²ï¼Œé¿å…äº‰ç”¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;kill-process-or-sacrifice-child&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#kill-process-or-sacrifice-child&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Kill process or sacrifice child&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;æœ‰ä¸€ç§å†…æ ¸ä½œä¸šï¼ˆ &lt;code&gt;Kernel Job&lt;/code&gt; ï¼‰åä¸º  &lt;code&gt;Out of Memory Killer&lt;/code&gt; ï¼Œå®ƒä¼šåœ¨å¯ç”¨å†…å­˜æä½çš„æƒ…å†µä¸‹ â€œæ€æ­»â€ï¼ˆ &lt;code&gt;kill&lt;/code&gt; ï¼‰æŸäº›è¿›ç¨‹ã€‚ &lt;code&gt;OOM Killer&lt;/code&gt;  ä¼šå¯¹æ‰€æœ‰è¿›ç¨‹è¿›è¡Œæ‰“åˆ†ï¼Œç„¶åå°†è¯„åˆ†è¾ƒä½çš„è¿›ç¨‹ â€œæ€æ­»â€ï¼Œå…·ä½“çš„è¯„åˆ†è§„åˆ™å¯ä»¥å‚è€ƒ  &lt;code&gt;Surviving the Linux OOM Killer&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;ä¸åŒäºå…¶ä»–çš„  &lt;code&gt;OOM&lt;/code&gt;  é”™è¯¯ï¼Œ  &lt;code&gt;Killprocessorsacrifice child&lt;/code&gt;  é”™è¯¯ä¸æ˜¯ç”±  &lt;code&gt;JVM&lt;/code&gt;  å±‚é¢è§¦å‘çš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿå±‚é¢è§¦å‘çš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸå› åˆ†æ-3&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#åŸå› åˆ†æ-3&#34;&gt;#&lt;/a&gt; åŸå› åˆ†æ&lt;/h4&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œ &lt;code&gt;Linux&lt;/code&gt;  å†…æ ¸å…è®¸è¿›ç¨‹ç”³è¯·çš„å†…å­˜æ€»é‡å¤§äºç³»ç»Ÿå¯ç”¨å†…å­˜ï¼Œé€šè¿‡è¿™ç§ â€œé”™å³°å¤ç”¨â€ çš„æ–¹å¼å¯ä»¥æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œè¿™ç§æ–¹å¼ä¹Ÿä¼šæ— å¯é¿å…åœ°å¸¦æ¥ä¸€å®šçš„ â€œè¶…å–â€ é£é™©ã€‚ä¾‹å¦‚æŸäº›è¿›ç¨‹æŒç»­å ç”¨ç³»ç»Ÿå†…å­˜ï¼Œç„¶åå¯¼è‡´å…¶ä»–è¿›ç¨‹æ²¡æœ‰å¯ç”¨å†…å­˜ã€‚æ­¤æ—¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ¿€æ´»  &lt;code&gt;OOM Killer&lt;/code&gt; ï¼Œå¯»æ‰¾è¯„åˆ†ä½çš„è¿›ç¨‹ï¼Œå¹¶å°†å…¶ â€œæ€æ­»â€ï¼Œé‡Šæ”¾å†…å­˜èµ„æºã€‚&lt;/p&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-6&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-6&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;å‡çº§æœåŠ¡å™¨é…ç½® / éš”ç¦»éƒ¨ç½²ï¼Œé¿å…äº‰ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OOM Killer&lt;/code&gt;  è°ƒä¼˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä»£ç æ¡ˆä¾‹-4&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ä»£ç æ¡ˆä¾‹-4&#34;&gt;#&lt;/a&gt; ä»£ç æ¡ˆä¾‹&lt;/h4&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤º:Kill process or sacrifice child&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    java.util.List&amp;lt;&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[]&amp;gt; l = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; java.util.ArrayList();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; (&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; i = &lt;span class=&#34;number&#34;&gt;10000&lt;/span&gt;; i &amp;lt; &lt;span class=&#34;number&#34;&gt;100000&lt;/span&gt;; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            l.add(&lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[&lt;span class=&#34;number&#34;&gt;100000000&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125; &lt;span class=&#34;keyword&#34;&gt;catch&lt;/span&gt; (Throwable t) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            t.printStackTrace();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/killprocess.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;requested-array-size-exceeds-vm-limit&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#requested-array-size-exceeds-vm-limit&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Requested array size exceeds VM limit&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;JVM é™åˆ¶äº†æ•°ç»„çš„æœ€å¤§é•¿åº¦ï¼Œè¯¥é”™è¯¯è¡¨ç¤ºç¨‹åºè¯·æ±‚åˆ›å»ºçš„æ•°ç»„è¶…è¿‡æœ€å¤§é•¿åº¦é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;JVM åœ¨ä¸ºæ•°ç»„åˆ†é…å†…å­˜å‰ï¼Œä¼šæ£€æŸ¥è¦åˆ†é…çš„æ•°æ®ç»“æ„åœ¨ç³»ç»Ÿä¸­æ˜¯å¦å¯å¯»å€ï¼Œé€šå¸¸ä¸º  &lt;code&gt;Integer.MAX_VALUE-2&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ç±»é—®é¢˜æ¯”è¾ƒç½•è§ï¼Œé€šå¸¸éœ€è¦æ£€æŸ¥ä»£ç ï¼Œç¡®è®¤ä¸šåŠ¡æ˜¯å¦éœ€è¦åˆ›å»ºå¦‚æ­¤å¤§çš„æ•°ç»„ï¼Œæ˜¯å¦å¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå—ï¼Œåˆ†æ‰¹æ‰§è¡Œã€‚&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; (&lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt; i = &lt;span class=&#34;number&#34;&gt;3&lt;/span&gt;; i &amp;gt;= &lt;span class=&#34;number&#34;&gt;0&lt;/span&gt;; i--) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &lt;span class=&#34;keyword&#34;&gt;try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[] arr = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[Integer.MAX_VALUE-i];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            System.out.format(&lt;span class=&#34;string&#34;&gt;&amp;quot;Successfully initialized an array with %,d elements.\n&amp;quot;&lt;/span&gt;, Integer.MAX_VALUE-i);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125; &lt;span class=&#34;keyword&#34;&gt;catch&lt;/span&gt; (Throwable t) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;            t.printStackTrace();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/images/java/jvm/requestArraySize.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;direct-buffer-memory&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#direct-buffer-memory&#34;&gt;#&lt;/a&gt;  &lt;code&gt;Direct buffer memory&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;java&lt;/code&gt;  å…è®¸åº”ç”¨ç¨‹åºé€šè¿‡  &lt;code&gt;Direct ByteBuffer&lt;/code&gt;  ç›´æ¥è®¿é—®å †å¤–å†…å­˜ï¼Œè®¸å¤šé«˜æ€§èƒ½ç¨‹åºé€šè¿‡  &lt;code&gt;Direct ByteBuffer&lt;/code&gt;  ç»“åˆå†…å­˜æ˜ å°„æ–‡ä»¶ï¼ˆ &lt;code&gt;Memory Mapped File&lt;/code&gt; ï¼‰å®ç°é«˜é€Ÿ  &lt;code&gt;IO&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸå› åˆ†æ-4&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#åŸå› åˆ†æ-4&#34;&gt;#&lt;/a&gt; åŸå› åˆ†æ&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;Direct ByteBuffer&lt;/code&gt;  çš„é»˜è®¤å¤§å°ä¸º  &lt;code&gt;64 MB&lt;/code&gt; ï¼Œä¸€æ—¦ä½¿ç”¨è¶…å‡ºé™åˆ¶ï¼Œå°±ä¼šæŠ›å‡º  &lt;code&gt;Directbuffer memory&lt;/code&gt;  é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è§£å†³æ–¹æ¡ˆ-7&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-7&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Java&lt;/code&gt;  åªèƒ½é€šè¿‡  &lt;code&gt;ByteBuffer&lt;/code&gt; . &lt;code&gt;allocateDirect&lt;/code&gt;  æ–¹æ³•ä½¿ç”¨  &lt;code&gt;Direct ByteBuffer&lt;/code&gt; ï¼Œå› æ­¤ï¼Œå¯ä»¥é€šè¿‡  &lt;code&gt;Arthas&lt;/code&gt;  ç­‰åœ¨çº¿è¯Šæ–­å·¥å…·æ‹¦æˆªè¯¥æ–¹æ³•è¿›è¡Œæ’æŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥æ˜¯å¦ç›´æ¥æˆ–é—´æ¥ä½¿ç”¨äº†  &lt;code&gt;NIO&lt;/code&gt; ï¼Œå¦‚  &lt;code&gt;netty&lt;/code&gt; ï¼Œ &lt;code&gt;jetty&lt;/code&gt;  ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡å¯åŠ¨å‚æ•°  &lt;code&gt;-XX:MaxDirectMemorySize&lt;/code&gt;  è°ƒæ•´  &lt;code&gt;Direct ByteBuffer&lt;/code&gt;  çš„ä¸Šé™å€¼ã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥  &lt;code&gt;JVM&lt;/code&gt;  å‚æ•°æ˜¯å¦æœ‰  &lt;code&gt;-XX:+DisableExplicitGC&lt;/code&gt;  é€‰é¡¹ï¼Œå¦‚æœæœ‰å°±å»æ‰ï¼Œå› ä¸ºè¯¥å‚æ•°ä¼šä½¿  &lt;code&gt;System.gc()&lt;/code&gt;  å¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;æ£€æŸ¥å †å¤–å†…å­˜ä½¿ç”¨ä»£ç ï¼Œç¡®è®¤æ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼ï¼›æˆ–è€…é€šè¿‡åå°„è°ƒç”¨  &lt;code&gt;sun.misc.Cleaner&lt;/code&gt;  çš„  &lt;code&gt;clean()&lt;/code&gt;  æ–¹æ³•æ¥ä¸»åŠ¨é‡Šæ”¾è¢«  &lt;code&gt;Direct ByteBuffer&lt;/code&gt;  æŒæœ‰çš„å†…å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;å†…å­˜å®¹é‡ç¡®å®ä¸è¶³ï¼Œå‡çº§é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;ä»£ç æ¡ˆä¾‹-5&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ä»£ç æ¡ˆä¾‹-5&#34;&gt;#&lt;/a&gt; ä»£ç æ¡ˆä¾‹&lt;/h4&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤ºå¯¹å¤–å†…å­˜æº¢å‡º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * -Xms10m -Xmx10m -XX:+PrintGCDetails -XX:MaxDirectMemorySize=5m&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(&lt;span class=&#34;string&#34;&gt;&amp;quot;maxDirectMemory : &amp;quot;&lt;/span&gt; + (sun.misc.VM.maxDirectMemory() / (&lt;span class=&#34;keyword&#34;&gt;double&lt;/span&gt;) (&lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt; * &lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt;)) + &lt;span class=&#34;string&#34;&gt;&amp;quot;MB&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(&lt;span class=&#34;number&#34;&gt;6&lt;/span&gt; * &lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt; * &lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    System.out.println(byteBuffer);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŠ¥é”™å†…å®¹&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/directBuffer.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;æ’æŸ¥æ€è·¯&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ’æŸ¥æ€è·¯&#34;&gt;#&lt;/a&gt; æ’æŸ¥æ€è·¯&lt;/h2&gt;
&lt;p&gt;åˆ†äº«é‡åˆ° &lt;code&gt;OOM&lt;/code&gt;  ç±»é—®é¢˜å¦‚ä½•å¿«é€Ÿå®šä½é—®é¢˜ï¼Œå…·ä½“å“ªè¡Œä»£ç å‘ç”Ÿäº†é—®é¢˜&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆè¡¨ç°ä¼šå‘ç”Ÿ &lt;code&gt;OOM&lt;/code&gt;  å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ€ç›´æ¥çš„ï½ï¼Œæœ‰æŠ¥é”™ï¼Œ &lt;code&gt;outOfMemoryError&lt;/code&gt; ã€‚ å°±æ˜¯å‘ç”Ÿäº†ã€‚&lt;br&gt;
æœ‰é¢‘ç¹ &lt;code&gt;GC&lt;/code&gt;  çš„äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œä¹Ÿè¦æ³¨æ„ä¸‹ï¼Œå¯èƒ½æ˜¯åœ¨  &lt;code&gt;OOM&lt;/code&gt;  çš„è¾¹ç¼˜ç–¯ç‹‚è¯•æ¢ã€‚ æ¯”å¦‚  &lt;code&gt;FullGC&lt;/code&gt; ï¼Œ  &lt;code&gt;Young GC&lt;/code&gt; , ç­‰ã€‚&lt;br&gt;
 &lt;code&gt;CPU&lt;/code&gt;  å ç”¨ç‡è¾ƒé«˜ã€‚&lt;br&gt;
å…ˆè¯´ä¸€ä¸ªæ€è·¯å“ˆï½&lt;/p&gt;
&lt;h3 id=&#34;æ­¢æŸ&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ­¢æŸ&#34;&gt;#&lt;/a&gt; æ­¢æŸã€‚&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ åœ¨çº¿ä¸Šé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œ è¯·ï¼ŒåŠ¡å¿…ï¼ å…ˆå°†æœåŠ¡é‡å¯ï¼ç«‹åˆ»ï¼Œé©¬ä¸Šã€‚ åŠæ—¶æ­¢æŸã€‚  &lt;code&gt;ps&lt;/code&gt; : å¯ä»¥ç•™ä¸€å°æœºå™¨åšæ¡ˆå‘ç°åœºï¼Œè®°å¾—ä¸‹æ‰è¯¥æœºå™¨ï¼Œä¸å¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é—®é¢˜æ’æŸ¥&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#é—®é¢˜æ’æŸ¥&#34;&gt;#&lt;/a&gt; é—®é¢˜æ’æŸ¥&lt;/h3&gt;
&lt;p&gt;æ³¨æ„è§‚å¯Ÿçº¿ä¸ŠæœåŠ¡æƒ…å†µï¼Œå¦‚æœå†æ¬¡å‡ºç° &lt;code&gt;OOM&lt;/code&gt; , å½±å“ä¸šåŠ¡ï¼Œå†é—®é¢˜æ²¡æœ‰è§£å†³å®Œæˆä¹‹å‰ï¼Œè¿˜æ˜¯é‡‡ç”¨é‡å¯çš„æ–¹å¼è§£å†³ã€‚&lt;br&gt;
å¯ä»¥é€šè¿‡  &lt;code&gt;glowroot&lt;/code&gt;  ç­‰å¯è§†åŒ–çš„ç›‘æ§å·¥å…·ï¼Œè§‚å¯Ÿã€‚&lt;br&gt;
ä¹Ÿå¯ä»¥é€šè¿‡åœ¨æœºå™¨ä¸Š ä½¿ç”¨Â   &lt;code&gt;jstat -gc pid&lt;/code&gt;  æ¥æŸ¥çœ‹ &lt;code&gt;GC&lt;/code&gt;  æƒ…å†µã€‚&lt;br&gt;
åˆ†æé€ æˆ &lt;code&gt;OOM&lt;/code&gt;  çš„é—®é¢˜ã€‚(å…·ä½“å¦‚ä½•æ’æŸ¥ï¼Œå¯å‚è€ƒæ¡ˆä¾‹æ¨¡å—)&lt;/p&gt;
&lt;p&gt;æŸ¥åˆ°å¯¹åº” &lt;code&gt;JVM&lt;/code&gt;  è¿›ç¨‹ =&amp;gt;Â  æ’æŸ¥åˆ°å ç”¨å†…å­˜æ‰“çš„ &lt;code&gt;jvm&lt;/code&gt;  çº¿ç¨‹ =&amp;gt; æŸ¥çœ‹å¯¹åº”çº¿ç¨‹æ ˆä¿¡æ¯ =&amp;gt; ä½¿ç”¨ &lt;code&gt;Jmap&lt;/code&gt;  æ¥ç”Ÿæˆçº¿ç¨‹å †æ ˆä¿¡æ¯æ–‡ä»¶ =&amp;gt; åˆ†æå¤§å¯¹è±¡ &lt;code&gt;or&lt;/code&gt;  å ç”¨å†…å­˜å¤§çš„åŸå›  =&amp;gt;Â  åŸºæœ¬ä¸Šæ”¹ä»£ç æˆ–è€… &lt;code&gt;jvm&lt;/code&gt;  é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–æ’æŸ¥é—®é¢˜æ€è·¯å’Œè¿™ä¸ªä¹Ÿæ˜¯å¤§å·®ä¸å·®ï¼Œä½¿ç”¨çš„å‘½ä»¤ä¸åŒè€Œå·²ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¡ˆä¾‹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ¡ˆä¾‹&#34;&gt;#&lt;/a&gt; æ¡ˆä¾‹&lt;/h3&gt;
&lt;details class=&#34;warning&#34;&gt;&lt;summary&gt;ä¸¾ä¸ªæ —å­ğŸŒ°å§&lt;/summary&gt;&lt;div&gt;
&lt;p&gt;æ¯”è¾ƒå¸¸è§çš„åº”è¯¥æ˜¯ï¼š  &lt;code&gt;java.lang. outOfMemoryError: Java heap Space&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight java&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤ºOOM æ’æŸ¥è¿‡ç¨‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;heapSpaceError&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    Thread thread = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; Thread(() -&amp;gt; bigObject());&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    thread.start();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * æ¼”ç¤ºå¤§å¯¹è±¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; * -Xms128M -Xmx128M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;title&#34;&gt;bigObject&lt;/span&gt;&lt;span class=&#34;params&#34;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// 21 å¯ä»¥ï¼Œ22å°±ä¼šOOM&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;comment&#34;&gt;// 4* 1024 * 1024 = 4M * 32 = 128M&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[] integers = &lt;span class=&#34;keyword&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;int&lt;/span&gt;[&lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt; * &lt;span class=&#34;number&#34;&gt;1024&lt;/span&gt; * &lt;span class=&#34;number&#34;&gt;22&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰§è¡Œåå‘ç°æ§åˆ¶å°æ‰“å°å‡ºäº† &lt;code&gt;OOM&lt;/code&gt;  :  &lt;code&gt;java heap space&lt;/code&gt; .Â  å¥½å§ï¼Œå°±è£…ä½œçœ‹ä¸è§å§&lt;/p&gt;
&lt;p&gt;1ã€ä½¿ç”¨  &lt;code&gt;jps&lt;/code&gt;  å‘½ä»¤è·å–åˆ°  &lt;code&gt;jvm&lt;/code&gt;  è¿›ç¨‹å·&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/images/java/jvm/oom%E6%A1%88%E4%BE%8Bjps.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;2ã€ä½¿ç”¨  &lt;code&gt;jmap&lt;/code&gt;  å‘½ä»¤ &lt;code&gt;dump&lt;/code&gt;  å‡º å †æ ˆä¿¡æ¯ã€‚&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/jdump.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;3ã€ä½¿ç”¨  &lt;code&gt;mat&lt;/code&gt;  å·¥å…·ï¼Œåˆ†æ &lt;code&gt;dump&lt;/code&gt;  æ–‡ä»¶å†…å®¹ã€‚Â  (ä¸‹è½½åœ°å€:  &lt;code&gt;https://www.eclipse.org/mat/downloads.php&lt;/code&gt; Â  Â ä¸‹è½½æ˜¯çœŸç‰¹ğŸ´çš„æ…¢å•Šï¼Œ&lt;span class=&#34;label success&#34;&gt;â¤ï¸ä¸€èˆ¬äººæˆ‘ä¸å‘Šè¯‰ä»–ï¼šå…¬ä¼—å·å›å¤ &lt;code&gt;MAT&lt;/code&gt;  å°±èƒ½ç›´æ¥è·å–&lt;/span&gt;)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä¸‹è½½ä¹‹åæ— æ³•å¯åŠ¨çš„è¯ï¼Œæç¤º æ— æ³•åˆ›å»ºè™šæ‹Ÿæœºã€‚éœ€è¦ç®€å•é…ç½®ä¸‹ï¼š&lt;br&gt;
 &lt;code&gt;-vm /Library/Java/JavaVirtualMachines/jdk1.8.0_251.jdk/Contents/Home/bin&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;3.1ã€ä¸‹è½½ä¸‹ &lt;code&gt;dump&lt;/code&gt;  æ–‡ä»¶ï¼Œä½¿ç”¨æœ¬åœ°åˆ†æ &lt;code&gt;mat&lt;/code&gt;  å·¥å…·è¿›è¡Œåˆ†æã€‚&lt;/p&gt;
&lt;p&gt;å¯åŠ¨ &lt;code&gt;mat&lt;/code&gt; .&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/mat.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Open aÂ  heap Dump&lt;/code&gt;  ä¹‹åï¼Œå°±å¯ä»¥æ„‰å¿«çš„åˆ†æäº†ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“åˆ†ææ–¹æ³•è¯·è‡ªè¡Œç™¾åº¦å§ã€‚&lt;/p&gt;
&lt;p&gt;3.2ã€å¦‚æœ &lt;code&gt;dump&lt;/code&gt;  æ–‡ä»¶è¾ƒå°ï¼Œä¹Ÿå¯ä»¥ &lt;code&gt;java&lt;/code&gt;  è‡ªå¸¦çš„å·¥å…· jhat å‘½ä»¤è¿›è¡Œåˆ†æã€‚&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/jmap.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åè®¿é—®æœ¬æœºçš„  &lt;code&gt;7000&lt;/code&gt;  ç«¯å£ï¼Œå°±å¯ä»¥åˆ°çœ‹åˆ°åˆ†æçš„å†…å®¹äº†ã€‚&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/image2021-4-15_19-8-56.png&#34; alt=&#34;&#34;&gt;&lt;br&gt;
è¿›å…¥ä¹‹åï¼Œå°±å¯ä»¥çœ‹åˆ°å †å†…å­˜å ç”¨æƒ…å†µçš„æŸ±çŠ¶å›¾äº†ã€‚&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/heapHistogram.png&#34; alt=&#34;&#34;&gt;&lt;br&gt;
å‘ç°æœ‰  &lt;code&gt;Class[I&lt;/code&gt;  å ç”¨æœ€å¤šï¼ŒÂ  Â   &lt;code&gt;Class[I&lt;/code&gt;  è¡¨ç¤ºçš„æ˜¯  &lt;code&gt;int&lt;/code&gt;  æ•°ç»„ã€‚ é‚£æˆ‘ä»¬å°±æŸ¥ä¸‹ä»£ç é‡Œç”¨åˆ° &lt;code&gt;Class[I&lt;/code&gt;  ä¸­çš„åœ°æ–¹ï¼Œ&lt;/p&gt;
&lt;p&gt;å“‡ï¼Œæœç„¶æ˜¯åœ¨  &lt;code&gt;new&lt;/code&gt;  äº†ä¸€ä¸ªå¤§çš„æ•°æ®ï¼Œæ’‘çˆ†äº†å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;è¡¥å……ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;å…ˆæŸ¥çœ‹ jvm è¿›ç¨‹å·Â &lt;br&gt;
 &lt;code&gt;Â jpsÂ &lt;/code&gt;  Â æ³¨æ„ï¼šåªèƒ½æŸ¥çœ‹å±äºå½“å‰ç”¨æˆ· &lt;code&gt;java&lt;/code&gt;  è¿›ç¨‹&lt;br&gt;
Â  &lt;code&gt;ps -ef| grep java&lt;/code&gt;  æ‰¾åˆ°å¯¹åº”æœåŠ¡çš„è¿›ç¨‹ç¼–å·&lt;br&gt;
 &lt;code&gt;ps -ef| grep æœåŠ¡å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾:&lt;br&gt;
&lt;img data-src=&#34;/images/java/jvm/%E8%A1%A5%E5%85%85.png&#34; alt=&#34;&#34;&gt;&lt;br&gt;
Â éœ€è¦æ³¨æ„ä¸‹:&lt;/p&gt;
&lt;p&gt;1) æŸ¥çœ‹å½“å‰åº”ç”¨è¿è¡Œæƒ…å†µä¿¡æ¯ï¼ŒæŸ¥çœ‹æ˜¯å¦é…ç½®äº† &lt;code&gt;gc logï¼š-Xloggc:/apps/srv/instance/damai.gaotu100.com/logs/damai.gaotu100.com-gc.log&lt;/code&gt; Â  , å¯ä»¥ä» &lt;code&gt;gc&lt;/code&gt;  æ—¥å¿—ä¸­æŸ¥åˆ°å¾ˆå¤šä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;2ï¼‰æŸ¥çœ‹æ˜¯å¦æœ‰ &lt;code&gt;oom&lt;/code&gt;  è‡ªåŠ¨æ‰“å°äºŒè¿›åˆ¶ &lt;code&gt;dump&lt;/code&gt;  æ–‡ä»¶ï¼šÂ  &lt;code&gt;-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/apps/srv/instance/damai.gaotu100.com/logs/heapdump.hprof&lt;/code&gt; Â  ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰é…ç½®ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è‡ªè¡Œæ‰“å°:Â Â  &lt;code&gt;jmap -dump:format=b,file=/apps/srv/instance/test-kefu-web.baijiahulian.com/logs/22316.1.hprof pid&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæ¨èä¸‹ï¼Œé˜¿é‡Œå¼€æºçš„ jvm æ’æŸ¥å·¥å…·Â  arthasï¼ˆé˜¿å°”è¨æ–¯ï¼‰Â  &lt;code&gt;https://arthas.aliyun.com/doc/&lt;/code&gt; ã€‚æ–‡æ¡£å¾ˆå…¨ï¼Œéœ€è¦çš„è‡ªè¡Œé˜…è¯»å§ï½ï½&lt;/p&gt;
&lt;/div&gt;&lt;/details&gt;
&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆ-8&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#è§£å†³æ–¹æ¡ˆ-8&#34;&gt;#&lt;/a&gt; è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;åˆ†äº«é‡åˆ° &lt;code&gt;OOM&lt;/code&gt;  é—®é¢˜æ—¶æ€æ ·è§£å†³ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é•¿å…„äºç—…è§†ç¥ï¼Œæœªæœ‰å½¢è€Œé™¤ä¹‹ï¼Œæ•…åä¸å‡ºäºå®¶ã€‚ä¸­å…„æ²»ç—…ï¼Œå…¶åœ¨æ¯«æ¯›ï¼Œæ•…åä¸å‡ºäºé—¾ã€‚è‹¥æ‰é¹Šè€…ï¼Œé•µè¡€è„‰ï¼ŒæŠ•æ¯’è¯ï¼Œå‰¯è‚Œè‚¤ï¼Œé—²è€Œåå‡ºé—»äºè¯¸ä¾¯ã€‚ æ‰€ä»¥æ‰æœ‰å‡¡æ­¤è€…ä¸ç—…ç—…ï¼Œæ²»ä¹‹æ— åï¼Œä½¿ä¹‹æ— å½¢ï¼Œè‡³åŠŸä¹‹æˆï¼Œå…¶ä¸‹è°“ä¹‹è‡ªç„¶ã€‚&lt;br&gt;
è¿™å¥è¯ï¼Œç”¨åœ¨æˆ‘ä»¬è¿™é‡Œå°±æ˜¯Â  ç³»ç»Ÿçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¸å‡ºç°ä»»ä½• &lt;code&gt;OOM&lt;/code&gt; , å…¶ è°“ä¹‹è‡ªç„¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ ¹æ®ä¸Šè¿°çš„æ’æŸ¥è¿‡ç¨‹ï¼Œæ‰¾åˆ°äº†é—®é¢˜æ ¹æºä¹‹åï¼Œé‚£å°±&lt;br&gt;
 1. æ”¹ä»£ç &lt;br&gt;
 2. è°ƒæ•´å†…å­˜é…ç½®&lt;/p&gt;
&lt;p&gt;å¤§åˆ€é˜”æ–§çš„å¹²å§ï¼&lt;/p&gt;
&lt;div class=&#34;note success no-icon&#34;&gt;
&lt;p&gt;å¤§å®¶æœ‰ä»€ä¹ˆå»ºè®®å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æ€»ç»“&#34;&gt;#&lt;/a&gt; æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹å¾… &lt;code&gt;OOM&lt;/code&gt;  åº”è¯¥ä»å…¨é¢æ¥çœ‹ï¼Œæœ‰å¯èƒ½æ˜¯  &lt;code&gt;jvm&lt;/code&gt;  å†…å­˜ç¡®å®ç››ä¸ä¸‹è¦åˆ†é…çš„å¯¹è±¡ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ é¢‘ç¹ &lt;code&gt;GC&lt;/code&gt; ï¼Œä¸”æ”¶æ•ˆç”šä½å¯¼è‡´çš„ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯å®¿ä¸»æœºä¸Šå†…å­˜ä¸å¤Ÿæ€æ­» &lt;code&gt;jvm&lt;/code&gt;  å¯¼è‡´çš„ï¼ŒåŠ è½½çš„ç±»è¿‡å¤§è¿‡å¤šé€ æˆçš„ï¼Œè™šæ‹Ÿå†…å­˜ä¸å¤Ÿç”¨ç­‰ç­‰ã€‚æœ€åä¹Ÿä¸è¦å¿½ç•¥ å †å¤–å†…å­˜çš„å†…å­˜æº¢å‡ºã€‚&lt;/p&gt;
&lt;p&gt;çº¿ä¸Šé‡åˆ°è¿™ç±»é—®é¢˜ï¼Œç¬¬ä¸€è¦åŠæ—¶æ­¢æŸï¼Œæ–¹å¼å¾ˆç®€å•ï¼Œé‡å¯å°±èƒ½è§£å†³ã€‚Â  Â ä¿è¯çº¿ä¸Šå¯ç”¨ä¹‹åï¼Œå†å»æŸ¥é—®é¢˜ï¼Œæ ¹æ²»é—®é¢˜ã€‚Â  åŒæ—¶ä¸ç”¨å¿˜äº†ç›‘æ§çº¿ä¸ŠæœåŠ¡æ˜¯å¦æœ‰å†…å­˜è¦æº¢å‡ºçš„æƒ…å†µï¼ŒåŠæ—¶é‡å¯ï¼Œä¸ºå¤„ç† &lt;code&gt;OOM&lt;/code&gt;  é—®é¢˜äº‰å–æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;æ’æŸ¥é—®é¢˜æ—¶ï¼Œé¦–å…ˆæ‰¾åˆ°å¯¹åº” &lt;code&gt;jvm&lt;/code&gt;  è¿›ç¨‹ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;jmap&lt;/code&gt;  æ‰“å°å‡º å†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;jhat&lt;/code&gt;  æˆ–è€…  &lt;code&gt;mat&lt;/code&gt;  å·¥å…·è¿›è¡Œåˆ†æï¼Œå®šä½åŸå› ã€‚è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬åœ¨ &lt;code&gt;coding&lt;/code&gt;  çš„æ—¶å€™ï¼Œè¦æ³¨æ„ä¸‹ï¼Œä¸è¦ç¼–å†™å¯¼è‡´ &lt;code&gt;OOM&lt;/code&gt;  ä»£ç ã€‚â€œæœªæœ‰å½¢è€Œé™¤ä¹‹ï½â€&lt;/p&gt;
&lt;h2 id=&#34;æŠ›ä¸ªé—®é¢˜~&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æŠ›ä¸ªé—®é¢˜~&#34;&gt;#&lt;/a&gt; æŠ›ä¸ªé—®é¢˜ï½&lt;/h2&gt;
&lt;p&gt;å‘ç”Ÿ OOMï¼Œç¨‹åºä¼šé€€å‡ºå—ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸‹æœŸè§&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;æœ€å&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#æœ€å&#34;&gt;#&lt;/a&gt; æœ€å&lt;/h4&gt;
&lt;p&gt;å¸Œæœ›å’Œä½ ä¸€èµ·é‡è§æ›´å¥½çš„è‡ªå·±&lt;br&gt;
&lt;img data-src=&#34;/images/qrcode.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
